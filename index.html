<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>VietQR Thanh Toán</title>

<style>
/* ========================= */
/* 5 THEME MỚI */
/* ========================= */

:root {
    --bg1:#ffffff;
    --bg2:#f5f5f5;
    --text:#222;
    --card:#ffffffcc;
    --border:#ddd;
}

/* Theme 6 – Đất vàng ánh kim */
body.theme6 { --bg1:#cda664; --bg2:#4e3a1f; }

/* Theme 7 – Nâu đất bazan */
body.theme7 { --bg1:#a6562b; --bg2:#3a1c0f; }

/* Theme 8 – Cam đất premium */
body.theme8 { --bg1:#ff8f3f; --bg2:#7b3f12; }

/* Theme 9 – Tím đất sang trọng */
body.theme9 { --bg1:#8e44ad; --bg2:#3d1e57; }

/* Theme 10 – Đỏ đất trầm */
body.theme10 { --bg1:#d84343; --bg2:#5e1a1a; }

/* ========================= */
/* BASE UI */
/* ========================= */

body {
    margin:0;
    font-family:Arial, sans-serif;
    background:linear-gradient(180deg, var(--bg1), var(--bg2));
    color:var(--text);
    padding:12px;
    transition:.3s ease;
}

.wrap { max-width:480px; margin:auto; }

h2 {
    margin-bottom:14px;
    text-align:center;
    letter-spacing:0.5px;
}

/* Theme selector */
.theme-bar {
    display:flex;
    gap:10px;
    justify-content:center;
    flex-wrap:wrap;
    margin-bottom:18px;
}

.theme-dot {
    width:26px;
    height:26px;
    border-radius:50%;
    border:2px solid #fff;
    cursor:pointer;
    transition:.2s;
}

.theme-dot:hover { transform:scale(1.1); }

.label {
    margin:10px 0 6px;
    font-size:15px;
}

input, select {
    width:100%;
    padding:12px;
    border:none;
    border-radius:10px;
    font-size:16px;
    outline:none;
    background:var(--card);
    color:var(--text);
    border:1px solid var(--border);
}

/* BANK GRID */
.bank-grid {
    display:grid;
    grid-template-columns:repeat(5, 1fr);
    gap:8px;
    margin-top:10px;
}

.bank-item {
    background:var(--card);
    border-radius:12px;
    height:55px;
    display:flex;
    justify-content:center;
    align-items:center;
    border:2px solid transparent;
    transition:.2s;
}

.bank-item.active { border-color:var(--border); }

.bank-item img {
    width:85%;
    height:85%;
    object-fit:contain;
}

/* QR BOX */
.qr-box {
    background:var(--card);
    padding:18px;
    border-radius:16px;
    margin-top:22px;
    text-align:center;
    border:1px solid var(--border);
}

.qr-box img {
    width:100%;
    height:48vh;
    object-fit:contain;
    background:white;
    border-radius:14px;
}

.info {
    margin-top:6px;
    font-size:18px;
}
</style>

</head>
<body class="theme6">

<div class="wrap">

    <h2>Thanh toán VietQR</h2>

    <!-- Theme Switcher -->
    <div class="theme-bar">
        <div class="theme-dot" style="background:#cda664" onclick="setTheme('theme6')"></div>
        <div class="theme-dot" style="background:#a6562b" onclick="setTheme('theme7')"></div>
        <div class="theme-dot" style="background:#ff8f3f" onclick="setTheme('theme8')"></div>
        <div class="theme-dot" style="background:#8e44ad" onclick="setTheme('theme9')"></div>
        <div class="theme-dot" style="background:#d84343" onclick="setTheme('theme10')"></div>
    </div>

    <div class="label">Chọn người nhận</div>
    <select id="receiver" onchange="renderBanks(); updateQR();"></select>

    <div class="label">Chọn ngân hàng</div>
    <div id="bankArea" class="bank-grid"></div>

    <div class="label">Số tiền</div>
    <input id="amount" placeholder="Nhập số tiền…">

    <div class="qr-box">
        <img id="qrImg" src="">
        <div class="info" id="accName"></div>
        <div class="info" id="accNumber"></div>
        <div class="info" id="money"></div>
    </div>

</div>

<script>

function setTheme(t){
    document.body.className = t;
}

/* ACCOUNT DATA */
const data = {
    "NGUYEN VAN DIEN": [
        ["TCB","2255992888"],
        ["TCB","255255992888"],
        ["MB","255255992888"],
        ["BIDV","8815369595"],
        ["AGR","3180205507882"],
        ["AGR","8888858925890"],
        ["MSB","9221111990"],
        ["TPB","25525599288"],
        ["LPB","123456789"],
        ["VTB","109005208772"],
        ["OCB","25892859"],
        ["VIB","925890"],
        ["VPB","0858925890"],
        ["SGB","020586422589"]
    ],
    "PHAM THI THEU": [
        ["VTB","105005039408"],
        ["TCB","55228882999"]
    ],
    "NGUYEN THI NGUYET": [
        ["VCB","1015772918"]
    ],
    "NGUYEN VAN THAO": [
        ["TPB","00083062001"]
    ]
};

const bankCode = {
    "VCB":"970436","TCB":"970407","MB":"970422","BIDV":"970418","AGR":"970405",
    "MSB":"970426","TPB":"970423","LPB":"970449","VTB":"970415","OCB":"970448",
    "VIB":"970441","VPB":"970432","SGB":"970400"
};

const bankLogo = {};
Object.keys(bankCode).forEach(b=>{
    bankLogo[b] = `https://api.vietqr.io/img/${b}.png`;
});

/* Load receiver list */
let receiver = document.getElementById("receiver");
Object.keys(data).forEach(name=>{
    let o = document.createElement("option");
    o.value = name;
    o.textContent = name;
    receiver.appendChild(o);
});

let selectedBank = null;

function renderBanks(){
    let name = receiver.value;
    let list = data[name];

    let box = document.getElementById("bankArea");
    box.innerHTML = "";

    list.forEach(([bank, acc]) => {
        let div = document.createElement("div");
        div.className = "bank-item";
        div.innerHTML = `<img src="${bankLogo[bank]}">`;

        div.onclick = function(){
            document.querySelectorAll(".bank-item").forEach(i=>i.classList.remove("active"));
            this.classList.add("active");
            selectedBank = [bank, acc];
            updateQR();
        };

        box.appendChild(div);
    });
}

/* Money formatter */
function formatMoney(x){
    if (!x) return "";
    return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
}

amount.addEventListener("input", ()=>{
    let raw = amount.value.replace(/[^0-9]/g,"");
    amount.value = formatMoney(raw);
    updateQR();
});

/* UPDATE QR */
function updateQR(){
    if (!selectedBank) return;

    let [bank, acc] = selectedBank;
    let rawAmount = amount.value.replace(/,/g,"");
    let formatted = formatMoney(rawAmount);

    let r = receiver.value;

    // MẶC ĐỊNH NỘI DUNG
    let info = encodeURIComponent(r + " chuyen tien");

    let url =
        `https://img.vietqr.io/image/${bankCode[bank]}-${acc}-compact.png?amount=${rawAmount}&addInfo=${info}`;

    qrImg.src = url;
    accName.textContent = r;
    accNumber.textContent = acc;
    money.textContent = rawAmount ? formatted + " đ" : "";
}

renderBanks();

</script>

</body>
</html>
