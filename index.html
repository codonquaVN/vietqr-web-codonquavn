<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Thanh toán VietQR</title>

<style>
/* ========================================= */
/* BASE LAYOUT — DÙNG CHUNG MỌI THEME        */
/* ========================================= */
body {
    margin: 0;
    font-family: Arial, sans-serif;
    color: white;
    transition: 0.3s;
}

.wrap {
    max-width: 480px;
    margin: auto;
    padding: 20px;
}

.label {
    margin: 15px 0 6px;
    font-size: 17px;
    font-weight: bold;
}

input, select {
    width: 100%;
    padding: 14px;
    font-size: 17px;
    border-radius: 10px;
    border: none;
}

/* Bank icon grid */
.bank-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 10px;
}
.bank-item {
    background: rgba(255,255,255,0.15);
    padding: 8px;
    border-radius: 12px;
    text-align: center;
    border: 2px solid transparent;
    cursor: pointer;
    transition: 0.25s;
}
.bank-item img {
    width: 42px;
    height: 42px;
    object-fit: contain;
}
.bank-item.active {
    border-color: yellow;
    background: rgba(255,255,255,0.35);
}

/* QR Box */
.qr-box {
    margin-top: 25px;
    padding: 20px;
    border-radius: 16px;
    text-align: center;
}
.qr-box img {
    width: 260px;
    background: white;
    border-radius: 10px;
}

/* ========================================= */
/* THEME SELECTOR (5 CHẤM)                   */
/* ========================================= */
.theme-bar {
    display: flex;
    justify-content: center;
    gap: 12px;
    margin-top: 15px;
}
.theme-dot {
    width: 18px;
    height: 18px;
    border-radius: 50%;
    border: 2px solid white;
    cursor: pointer;
    opacity: 0.6;
    transition: 0.25s;
}
.theme-dot.active {
    opacity: 1;
    transform: scale(1.2);
}

/* ========================================= */
/* 5 THEME                                   */
/* ========================================= */

/* THEME 1 — ĐEN CAM (ICT HUB) */
.theme-1 {
    background: linear-gradient(180deg, #ff7a00, #000);
}
.theme-1 .qr-box { background: rgba(255,255,255,0.1); }

/* THEME 2 — TRẮNG XANH NGÂN HÀNG */
.theme-2 {
    background: linear-gradient(180deg, #ffffff, #0099ff);
}
.theme-2 body, .theme-2 .label { color: black !important; }
.theme-2 .qr-box { background: rgba(255,255,255,0.7); }

/* THEME 3 — ĐEN NEON XANH */
.theme-3 {
    background: linear-gradient(180deg, #001, #0f0);
}
.theme-3 .qr-box { background: rgba(0,0,0,0.4); }

/* THEME 4 — TÍM HỒNG */
.theme-4 {
    background: linear-gradient(180deg, #ff00ff, #6600ff);
}
.theme-4 .qr-box { background: rgba(255,255,255,0.15); }

/* THEME 5 — ĐỎ ĐEN */
.theme-5 {
    background: linear-gradient(180deg, #ff0000, #111);
}
.theme-5 .qr-box { background: rgba(255,255,255,0.1); }

</style>
</head>
<body class="theme-1">

<div class="wrap">

    <!-- Chọn theme -->
    <div class="theme-bar">
        <div class="theme-dot active" onclick="setTheme(1)" style="background:#ff7a00;"></div>
        <div class="theme-dot" onclick="setTheme(2)" style="background:#0099ff;"></div>
        <div class="theme-dot" onclick="setTheme(3)" style="background:#00ff99;"></div>
        <div class="theme-dot" onclick="setTheme(4)" style="background:#ff00ff;"></div>
        <div class="theme-dot" onclick="setTheme(5)" style="background:#ff0000;"></div>
    </div>

    <div class="label">Chọn người nhận</div>
    <select id="receiver" onchange="renderBanks(); updateQR();"></select>

    <div class="label">Chọn ngân hàng</div>
    <div id="bankLogos" class="bank-grid"></div>

    <div class="label">Nhập số tiền</div>
    <input id="amount" type="number" placeholder="Nhập số tiền" oninput="updateQR()">

    <div class="qr-box">
        <img id="qrImg">
        <div id="bankName"></div>
        <div id="accNumber"></div>
        <div id="accName"></div>
        <div id="money"></div>
    </div>
</div>

<script>
/* ================================================================= */
/* 1. DỮ LIỆU TÀI KHOẢN                                              */
/* ================================================================= */
const data = {
    "NGUYEN VAN DIEN": [
        ["TCB","2255992888"],
        ["TCB","255255992888"],
        ["MB","255255992888"],
        ["MB","123456789"],
        ["BIDV","8815369595"],
        ["AGR","3180205507882"],
        ["AGR","8888858925890"],
        ["MSB","9221111990"],
        ["TPB","25525599288"],
        ["LPB","123456789"],
        ["VTB","109005208772"],
        ["OCB","25892859"],
        ["VIB","925890"],
        ["VPB","0858925890"],
        ["SGB","020586422589"]
    ],
    "PHAM THI THEU": [
        ["VTB","105005039408"],
        ["TCB","55228882999"]
    ],
    "NGUYEN THI NGUYET": [
        ["VCB","1015772918"]
    ],
    "NGUYEN VAN THAO": [
        ["VTB","00083062001"]
    ]
};

/* Mã VietQR */
const bankCode = {
    "VCB":"970436","TCB":"970407","MB":"970422","BIDV":"970418","AGR":"970405",
    "MSB":"970426","TPB":"970423","LPB":"970449","VTB":"970415","OCB":"970448",
    "VIB":"970441","VPB":"970432","SGB":"970400"
};

/* Logo ngân hàng (CDN chuẩn nhất) */
const bankLogo = {};
for (let b in bankCode) {
    bankLogo[b] = `https://img.vietqr.io/image/${b}.png`;
}

/* Render danh sách người nhận */
const recvSelect = document.getElementById("receiver");
Object.keys(data).forEach(name => {
    let o = document.createElement("option");
    o.value = name;
    o.textContent = name;
    recvSelect.appendChild(o);
});

let selectedBank = null;

/* ================================================================= */
/* RENDER LOGO NGÂN HÀNG                                             */
/* ================================================================= */
function renderBanks() {
    let r = receiver.value;
    let list = data[r];
    let box = document.getElementById("bankLogos");
    box.innerHTML = "";

    list.forEach(([bank, acc]) => {
        let div = document.createElement("div");
        div.className = "bank-item";
        div.setAttribute("data-bank", bank);
        div.setAttribute("data-acc", acc);

        div.innerHTML = `<img src="${bankLogo[bank]}" alt="${bank}">`;

        div.onclick = function () {
            document.querySelectorAll(".bank-item").forEach(i => i.classList.remove("active"));
            this.classList.add("active");
            selectedBank = [bank, acc];
            updateQR();
        };

        box.appendChild(div);
    });
}

renderBanks();

/* ================================================================= */
/* GENERATE QR                                                       */
/* ================================================================= */
function updateQR() {
    if (!selectedBank) return;

    let [bank, acc] = selectedBank;
    let amt = document.getElementById("amount").value;
    let r = receiver.value;

    let info = encodeURIComponent(r + " chuyen tien");

    let api = `https://img.vietqr.io/image/${bankCode[bank]}-${acc}-compact.png?amount=${amt}&addInfo=${info}`;

    document.getElementById("qrImg").src = api;
    bankName.innerText = bank;
    accNumber.innerText = acc;
    accName.innerText = r;
    money.innerText = amt ? amt + " đ" : "";
}

/* ================================================================= */
/* THEME SWITCH                                                      */
/* ================================================================= */
function setTheme(n) {
    document.body.className = `theme-${n}`;
    document.querySelectorAll(".theme-dot").forEach(e => e.classList.remove("active"));
    document.querySelectorAll(".theme-dot")[n-1].classList.add("active");
}
</script>

</body>
</html>
