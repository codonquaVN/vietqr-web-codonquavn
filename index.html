<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>VietQR Payment</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
/* ========================= */
/*  THEME ENGINE             */
/* ========================= */
:root {
    --bg1: #ff7a00;
    --bg2: #000;
    --text: #ffffff;
    --card: rgba(255,255,255,0.15);
    --border-active: #ffae4a;
}

body.theme1 { --bg1:#ff7a00; --bg2:#000; }
body.theme2 { --bg1:#005bea; --bg2:#00c6fb; }
body.theme3 { --bg1:#8e2de2; --bg2:#4a00e0; }
body.theme4 { --bg1:#1e3c72; --bg2:#2a5298; }
body.theme5 { --bg1:#0f0c29; --bg2:#302b63; }

/* ========================= */
/*  GLOBAL UI                */
/* ========================= */

body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: linear-gradient(180deg, var(--bg1), var(--bg2));
    color: var(--text);
    padding: 10px;
    transition: .3s;
}

.wrap {
    max-width: 480px;
    margin: auto;
}

h2 { margin-top: 5px; }

/* Theme Switcher */
.theme-bar {
    display: flex;
    gap: 12px;
    margin: 15px 0;
    justify-content: center;
}
.theme-dot {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    cursor: pointer;
    border: 2px solid white;
}
.theme-dot:hover { transform: scale(1.1); }

/* Label */
.label {
    margin: 10px 0 6px;
    font-size: 15px;
}

/* Form */
input, select {
    width: 100%;
    padding: 13px;
    font-size: 17px;
    border: none;
    border-radius: 10px;
    outline: none;
}

/* BANK GRID */
.bank-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 10px;
    margin: 15px 0;
}

.bank-item {
    background: var(--card);
    border: 1.5px solid transparent;
    padding: 10px;
    text-align: center;
    border-radius: 12px;
    cursor: pointer;
    transition: .2s;
    height: 110px;               /* Giảm chiều cao (tối ưu) */
    display: flex;
    flex-direction: column;
    justify-content: center;
}

.bank-item img {
    width: 55px;                 /* Logo nhỏ hơn nhưng vẫn rõ */
    height: 55px;
    object-fit: contain;
}

.bank-id {
    margin-top: 4px;
    font-size: 13px;             /* Chữ nhỏ gọn */
}

.bank-item.active {
    border-color: var(--border-active);
    background: rgba(255,255,255,0.28);
}

/* QR BOX */
.qr-box {
    background: var(--card);
    padding: 20px;
    border-radius: 20px;
    text-align: center;
    margin-top: 25px;
}

/* QR chiếm 50% màn hình */
.qr-box img {
    width: 95%;
    height: 50vh;          /* CHIẾM 1/2 MÀN HÌNH */
    object-fit: contain;   /* Không méo hình */
    border-radius: 16px;
    background: white;
}

.info {
    margin-top: 12px;
    font-size: 18px;
}
</style>
</head>

<body class="theme1">
<div class="wrap">
    <h2>Thanh toán VietQR</h2>

    <!-- THEME SWITCH -->
    <div class="theme-bar">
        <div class="theme-dot" style="background:#ff7a00" onclick="setTheme('theme1')"></div>
        <div class="theme-dot" style="background:#00c6fb" onclick="setTheme('theme2')"></div>
        <div class="theme-dot" style="background:#8e2de2" onclick="setTheme('theme3')"></div>
        <div class="theme-dot" style="background:#2a5298" onclick="setTheme('theme4')"></div>
        <div class="theme-dot" style="background:#302b63" onclick="setTheme('theme5')"></div>
    </div>

    <!-- Receiver -->
    <div class="label">Chọn người nhận</div>
    <select id="receiver" onchange="renderBanks(); updateQR();"></select>

    <!-- Banks -->
    <div class="label">Chọn ngân hàng</div>
    <div id="bankArea" class="bank-grid"></div>

    <!-- Amount -->
    <div class="label">Số tiền</div>
    <input id="amount" type="number" placeholder="Nhập số tiền" oninput="updateQR()">

    <!-- QR BOX -->
    <div class="qr-box">
        <img id="qrImg" src="">
        <div class="info" id="accName"></div>
        <div class="info" id="accNumber"></div>
        <div class="info" id="bankName"></div>
        <div class="info" id="money"></div>
    </div>
</div>

<script>
/* THEME */
function setTheme(t) { document.body.className = t; }

/* ACCOUNT DATA */
const data = {
    "NGUYEN VAN DIEN": [
        ["TCB","2255992888"],
        ["TCB","255255992888"],
        ["MB","255255992888"],
        ["MB","123456789"],
        ["BIDV","8815369595"],
        ["AGR","3180205507882"],
        ["AGR","8888858925890"],
        ["MSB","9221111990"],
        ["TPB","25525599288"],
        ["LPB","123456789"],
        ["VTB","109005208772"],
        ["OCB","25892859"],
        ["VIB","925890"],
        ["VPB","0858925890"],
        ["SGB","020586422589"]
    ],
    "PHAM THI THEU": [
        ["VTB","105005039408"],
        ["TCB","55228882999"]
    ],
    "NGUYEN THI NGUYET": [
        ["VCB","1015772918"]
    ],
    "NGUYEN VAN THAO": [
        ["VTB","00083062001"]
    ]
};

/* VIETQR BIN CODE */
const bankCode = {
    "VCB":"970436","TCB":"970407","MB":"970422","BIDV":"970418","AGR":"970405",
    "MSB":"970426","TPB":"970423","LPB":"970449","VTB":"970415","OCB":"970448",
    "VIB":"970441","VPB":"970432","SGB":"970400"
};

/* LOGO CDN */
const bankLogo = {};
Object.keys(bankCode).forEach(b=>{
    bankLogo[b] = `https://api.vietqr.io/img/${b}.png`;
});

/* RENDER RECEIVER LIST */
let recv = document.getElementById("receiver");
Object.keys(data).forEach(name=>{
    let o = document.createElement("option");
    o.value = name;
    o.textContent = name;
    recv.appendChild(o);
});

let selectedBank = null;

/* RENDER BANK GRID */
function renderBanks() {
    let name = receiver.value;
    let list = data[name];

    let box = document.getElementById("bankArea");
    box.innerHTML = "";

    list.forEach(([bank, acc])=>{
        let div = document.createElement("div");
        div.className = "bank-item";

        div.innerHTML = `
            <img src="${bankLogo[bank]}" onerror="this.src='https://api.vietqr.io/img/default.png'">
            <div class="bank-id">${bank} • ${bankCode[bank]}</div>
        `;

        div.onclick = function() {
            document.querySelectorAll(".bank-item").forEach(i=>i.classList.remove("active"));
            this.classList.add("active");
            selectedBank = [bank, acc];
            updateQR();
        };

        box.appendChild(div);
    });
}

/* UPDATE QR */
function updateQR() {
    if (!selectedBank) return;

    let [bank, acc] = selectedBank;
    let amt = amount.value;
    let r = receiver.value;

    let info = encodeURIComponent(r + " chuyen tien");

    let url =
        `https://img.vietqr.io/image/${bankCode[bank]}-${acc}-compact.png?amount=${amt}&addInfo=${info}`;

    qrImg.src = url;
    accName.textContent = r;
    accNumber.textContent = acc;
    bankName.textContent = bank;
    money.textContent = amt ? amt + " đ" : "";
}

/* INIT */
renderBanks();
</script>

</body>
</html>
